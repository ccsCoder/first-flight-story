import{S as e,P as t,W as n,O as o,G as i,B as s,V as a,M as r,H as d,a as c}from"./vendor.6b9dfbe4.js";const u=new e;let l,w=!1;const m=new t(50,window.innerWidth/window.innerHeight,.1,1e3),y=new n({canvas:document.querySelector("#bg")});y.setPixelRatio(window.devicePixelRatio),y.setSize(window.innerWidth,window.innerHeight);const g=new o(m,y.domElement);u.add(g);(new i).load("models/wright_flyer-web_resolution-gltf/wright_flyer-full_resolution.gltf",(function(e){document.querySelector("#loading-indicator").remove(),document.querySelector("#bg").setAttribute("aria-busy",!1),l=e.scene,u.add(l);const t=(new s).setFromObject(l),n=t.getSize(new a).length(),o=t.getCenter(new a);!function(e,t,n,o){const i=.5*e,s=r.degToRad(.5*o.fov),d=i/Math.tan(s),c=(new a).subVectors(o.position,n).multiply(new a(1,0,1)).normalize();o.position.copy(c.multiplyScalar(d).add(n)),o.near=t/100,o.far=100*t,o.updateProjectionMatrix(),o.lookAt(n.x,n.y,n.z)}(.8*n,n,o,m),g.maxDistance=10*n,g.target.copy(o),g.update()}));const f=new d(15198183,2828585,1);f.castShadow=!0,u.add(f);const p=new c(16777215);function b(e){const t=this||e.target;t.classList.toggle("opened"),t.setAttribute("aria-expanded",t.classList.contains("opened"));const n=document.querySelector("#aside-menu");t.classList.contains("opened")?(t.setAttribute("aria-label","Close story dialog"),n.style.left="0",document.querySelector("#toggle-animation").focus()):(t.setAttribute("aria-label","Open story dialog"),n.style.left="-100%",t.focus())}f.position.set(10,10,10),u.add(p),window.addEventListener("resize",(function(){y.setSize(window.innerWidth,window.innerHeight),m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix()})),function e(){requestAnimationFrame(e),l&&w&&(l.rotation.y+=.001),g.update(),y.render(u,m)}(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".tip-container");function t(){const e=document.querySelector("#menu-button");e.classList.remove("opened"),document.querySelector("#aside-menu").style.left="-100%",e.focus()}document.querySelector("#menu-button").addEventListener("click",b),document.querySelector("#menu-button").addEventListener("keydown",(function(e){"ArrowDown"!=e.key||b(e)})),document.addEventListener("keydown",(function(e){"Escape"==e.key&&t()})),document.querySelector("#bg").addEventListener("click",t),setTimeout((()=>{e.style.opacity=1}),3e3),setTimeout((()=>{e.remove()}),8e3),document.querySelector("#toggle-animation").addEventListener("change",(function(e){w=this.checked}))}));
